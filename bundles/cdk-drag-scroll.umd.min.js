!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/cdk/drag-drop"),require("@angular/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("cdk-drag-scroll",["exports","@angular/cdk/drag-drop","@angular/core","rxjs","rxjs/operators"],e):e((t=t||self)["cdk-drag-scroll"]={},t.ng.cdk["drag-drop"],t.ng.core,t.rxjs,t.rxjs.operators)}(this,function(t,e,o,r,i){"use strict";var n=function(){return(n=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var r,i,n=o.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=n.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=n["return"])&&o.call(n)}finally{if(i)throw i.error}}return s}function a(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t}var c=function(){function t(t,e){this.container=t,this.scrollCallback=e,this.margin=30,this.maxSpeed=25,this.point={x:0,y:0},this.boundaryRect=this.container.getBoundingClientRect()}return t.prototype.onMove=function(t){var e=this;this.point=t,cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(function(){return e.scrollTick()})},t.prototype.scrollTick=function(){var t=this;cancelAnimationFrame(this.animationFrame),this.autoScroll()&&(this.animationFrame=requestAnimationFrame(function(){return t.scrollTick()}))},t.prototype.autoScroll=function(){var t,e,o=this;return t=this.point.x<this.boundaryRect.left+this.margin?Math.floor(Math.max(-1,(this.point.x-this.boundaryRect.left)/this.margin-1)*this.maxSpeed):this.point.x>this.boundaryRect.right-this.margin?Math.ceil(Math.min(1,(this.point.x-this.boundaryRect.right)/this.margin+1)*this.maxSpeed):0,e=this.point.y<this.boundaryRect.top+this.margin?Math.floor(Math.max(-1,(this.point.y-this.boundaryRect.top)/this.margin-1)*this.maxSpeed):this.point.y>this.boundaryRect.bottom-this.margin?Math.ceil(Math.min(1,(this.point.y-this.boundaryRect.bottom)/this.margin+1)*this.maxSpeed):0,setTimeout(function(){e&&o.scrollY(e),t&&o.scrollX(t)}),t||e},t.prototype.scrollY=function(t){this.container.scrollTop+=t,this.scrollCallback&&this.scrollCallback({x:0,y:t})},t.prototype.scrollX=function(t){this.container.scrollLeft+=t,this.scrollCallback&&this.scrollCallback({x:t,y:0})},t.prototype.destroy=function(){cancelAnimationFrame(this.animationFrame)},t}(),l=function(){function t(){this.debugInfo=new r.BehaviorSubject(null),this.enabled=!1}return t.prototype.log=function(t){this.debugInfo.next(t)},t.prototype.reset=function(){this.debugInfo.next(null)},t.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=o.ɵɵdefineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),u=function(){function t(t,e,o,n){var s=this;this.cdkDrag=t,this.dragDebugService=e,this.zone=o,this.changeDetectorRef=n,this.destroy$=new r.Subject,this.stopDragging$=new r.Subject,this.lastScroll={top:0,left:0},this.dragRef=this.cdkDrag._dragRef,this.dragRef?this.zone.runOutsideAngular(function(){s.dragRef.started.pipe(i.takeUntil(s.destroy$)).subscribe(function(t){s.log("Started",t,s.dragRef.isDragging()),s.started()}),s.dragRef.ended.pipe(i.takeUntil(s.destroy$)).subscribe(function(t){s.log("Ended",t),s.ended()}),s.dragRef.entered.pipe(i.takeUntil(s.destroy$)).subscribe(function(t){s.log("Entered",t),s.entered()}),s.dragRef.exited.pipe(i.takeUntil(s.destroy$)).subscribe(function(t){s.log("Exited",t),s.exited()})}):this.log("CdkDrag not found",this.cdkDrag,this.dragRef)}return t.prototype.ngOnChanges=function(t){var e=this;t.dragConnectedIds&&this.dragRef.isDragging()&&setTimeout(function(){e.syncSiblings()})},t.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete(),this.stopDragging$.next(),this.stopDragging$.complete(),this.destroyAutoScroll()},t.prototype.started=function(){var t=this;this.scrollContainer&&(this.destroyAutoScroll(),this.addDebugInfo(),this.autoScroll=new c(this.scrollContainer),this.lastScroll.top=this.scrollContainer.scrollTop,this.lastScroll.left=this.scrollContainer.scrollLeft,r.fromEvent(this.scrollContainer,"scroll").pipe(i.takeUntil(this.stopDragging$)).subscribe(function(){var e=t.scrollContainer.scrollLeft-t.lastScroll.left,o=t.scrollContainer.scrollTop-t.lastScroll.top;(e||o)&&t.handleScroll(e,o),t.lastScroll.top=t.scrollContainer.scrollTop,t.lastScroll.left=t.scrollContainer.scrollLeft}),this.dragRef.moved.pipe(i.debounceTime(10),i.takeUntil(this.stopDragging$)).subscribe(function(e){t.autoScroll.onMove(e.pointerPosition)}))},t.prototype.ended=function(){this.destroyAutoScroll(),this.stopDragging$.next(),this.dragDebugService.reset()},t.prototype.entered=function(){this.dragFixContainer()},t.prototype.exited=function(){this.dragFixContainer()},t.prototype.handleScroll=function(t,e){var o=this.getDropListRef();this.adjustContainers(),this.adjustItems(t,e),o._draggables.length>o._itemPositions.length&&this.syncItems(),this.addDebugInfo()},t.prototype.destroyAutoScroll=function(){this.autoScroll&&(this.autoScroll.destroy(),this.autoScroll=null)},t.prototype.getDropListRef=function(){return this.dragRef._dropContainer},t.prototype.addDebugInfo=function(){if(this.dragDebugService.enabled){var t=this.getDropListRef(),e=a(t._itemPositions.map(function(t){return{clientRect:t.clientRect,color:"blue",id:t.drag.data.data.name}}),t._siblings.map(function(t){return{clientRect:t._clientRect,color:"green",id:""}}),[{clientRect:t._clientRect,color:"#2FD1BB",id:""}]);this.dragDebugService.log(e.filter(function(t){return t.clientRect}))}},t.prototype.dragFixContainer=function(){var t=this;setTimeout(function(){t.getDropListRef()._cacheOwnPosition(),t.addDebugInfo()}),this.changeDetectorRef.markForCheck()},t.prototype.syncSiblings=function(){var t=this.getDropListRef();this.log("syncSiblings before",t._siblings.length),t.beforeStarted.next(),this.log("syncSiblings after",t._siblings.length),this.adjustContainers()},t.prototype.syncItems=function(){var t=this.getDropListRef(),e=t._itemPositions;t._activeDraggables=t._draggables.slice(),t._cacheItemPositions();var o=t._itemPositions;t._itemPositions=a(e),o.forEach(function(o){e.find(function(t){return o.drag===t.drag})||t._itemPositions.push(o)}),t._activeDraggables.push(this.dragRef)},t.prototype.adjustContainers=function(){var t=this.getDropListRef();t._cacheOwnPosition(),t._siblings.forEach(function(t){t._cacheOwnPosition()})},t.prototype.adjustItems=function(t,e){this.getDropListRef()._itemPositions.forEach(function(o){o.originalRect=o.originalRect||o.clientRect,o.clientRect=n({},o.clientRect,{left:o.clientRect.left-t,right:o.clientRect.right-t,top:o.clientRect.top-e,bottom:o.clientRect.bottom-e})})},t.prototype.log=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];this.dragDebugService.enabled&&console.log(t,e)},t.decorators=[{type:o.Directive,args:[{selector:"[vsDragScroll]",exportAs:"vsDragScroll"}]}],t.ctorParameters=function(){return[{type:e.CdkDrag},{type:l},{type:o.NgZone},{type:o.ChangeDetectorRef}]},t.propDecorators={dragConnectedIds:[{type:o.Input,args:["vsDragScrollConnectedTo"]}],scrollContainer:[{type:o.Input,args:["vsDragScrollContainer"]}]},t}(),g=function(){function t(){}return t.decorators=[{type:o.NgModule,args:[{imports:[e.DragDropModule],declarations:[u],exports:[u]}]}],t}();t.AutoScroll=c,t.DragDebugService=l,t.DragScrollDirective=u,t.DragScrollModule=g,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=cdk-drag-scroll.umd.min.js.map